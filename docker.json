{
  "builders": [
    {
      "type": "amazon-ebs",
      "region": "us-east-1",
      "source_ami": "ami-7f97d816",
      "instance_type": "m1.large",
      "ssh_username": "ubuntu",
      "ami_name": "docker-labs {{timestamp}}",
      "security_group_id" : "sg-ab8b04c0"
    }
  ],
  "provisioners": [
      {
        "inline": [
          "sudo sh -c \"curl http://get.docker.io/gpg | apt-key add -\"",
          "sudo sh -c \"echo deb https://get.docker.io/ubuntu docker main > /etc/apt/sources.list.d/docker.list\"",
          "sudo apt-get update",
          "sudo apt-get install linux-image-extra-virtual -y",

          "sudo apt-get install build-essential gettext libssl-dev libxslt1-dev libxml2-dev automake libtool libreadline-dev libglib2.0-dev -y",
          "sudo apt-get install git bzr mercurial subversion -y",
          "git config --global user.email \"pleasemailus@wercker.com\"",
          "git config --global user.name \"wercker\"",

          "git clone git://github.com/v8/v8.git v8",
          "(cd v8 ; git checkout 3.17.11)",
          "(cd v8 ; sudo make dependencies)",
          "(cd v8 ; sudo make x64.release library=shared)",
          "(sudo cp v8/c64.release/lib/target/* -t /usr/lib)",

          "sudo wget http://download.mono-project.com/sources/mono/mono-3.2.3.tar.bz2",
          "tar -xf mono-3.2.3.tar.bz2",
          "(cd mono-3.2.3 ; ./configure --prefix=/usr/local --with-profile2=no --with-profile4_5=no; sudo make; sudo make install)",

          "sudo apt-get install lxc-docker -y",
          "sudo apt-get install libssl-dev build-essential libxslt-dev libxml2-dev -y",
          "sudo apt-get install git bzr mercurial subversion -y",
          "git config --global user.email \"pleasemailus@wercker.com\"",
          "git config --global user.name \"wercker\"",
          "sudo docker pull ubuntu",
          "sudo docker pull base",
          "sudo docker pull busybox",
          "sudo docker pull centos",
          "sudo docker pull schmidh/arch-base"
        ],
        "type": "shell"
      }
    ]
}
